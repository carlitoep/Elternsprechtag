# 1. Start mit JDK 17
FROM eclipse-temurin:17-jdk

# 2. Arbeitsverzeichnis
WORKDIR /app

# 3. Gradle Wrapper + Projekt kopieren
COPY gradlew .
COPY gradle/ gradle/
COPY build.gradle .
COPY settings.gradle .
COPY src/ src/

# 4. Rechte für Wrapper setzen
RUN chmod +x gradlew

# 5. Build ausführen
RUN ./gradlew build -x test

# 6. JAR kopieren
RUN mkdir -p /app/run
COPY build/libs/demo-0.0.1-SNAPSHOT.jar /app/run/demo.jar

# 7. Startbefehl
CMD ["java", "-jar", "/app/run/demo.jar"]
